(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,n){e.exports=n(40)},33:function(e,t,n){},34:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var o=n(1),a=n.n(o),r=n(23),c=n.n(r),i=(n(33),n(7)),u=n(8),s=n(10),l=n(9),d=n(11),h=(n(34),n(24)),m=function(e){var t=e.todo,n=e.onDelete,o=e.onComplete,r={textDecoration:t.completed?"line-through":"none"};return a.a.createElement("li",null,a.a.createElement("span",{className:"task",style:r,onClick:function(){o(t)}},t.text),a.a.createElement("span",{onClick:function(){n(t._id)},className:"btn-close"},"X"))},f=n(15);function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="/api"+e;return new Promise(function(e,o){fetch(n,t).then(function(t){return t.ok?t.json().then(function(t){return e(t)}):t.status>=400&&t.status<500?t.json().then(function(e){return o(e.error)}):o({message:"Cannot reach the server. Try again later"})}).catch(function(e){return console.log("caught: ".concat(e.message))})})}var v=function(e){return{type:10,error:e}},b=function(e){return{type:0,todos:e}},g=function(e){return{type:3,todo:e}},y=function(e){return{type:2,todo:e}},E=function(e){return{type:1,id:e}};var O=n(27),j=n(13),w=n(12),T=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={text:""},n.handleSubmit=n.handleSubmit.bind(Object(w.a)(n)),n.handleChange=n.handleChange.bind(Object(w.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.createTodo(this.state.text).then(this.props.history.push("/todos")).catch(function(e){console.log(e)}),e.target.reset()}},{key:"handleChange",value:function(e){var t=Object(j.a)({},e.target.name,e.target.value);this.setState(t)}},{key:"render",value:function(){var e=this.state.text;return a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement("label",{htmlFor:"task"},"Task"),a.a.createElement("input",{type:"text",name:"text",id:"task",autoComplete:"off",value:e,onChange:this.handleChange}),a.a.createElement("button",{type:"submit",className:"btn"},"Add"))}}]),t}(o.Component);T.defaultProps={handleSubmit:function(){console.log("handleSubmit prop is missing from newTodoForm")},text:function(){}};var k=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.getTodos()}},{key:"createTodo",value:function(e){return this.props.createTodo(e)}},{key:"deleteTodo",value:function(e){this.props.deleteTodo(e)}},{key:"completeTask",value:function(e){this.props.updateTodo(e)}},{key:"render",value:function(){var e=this,t=this.props.todos.map(function(t){return a.a.createElement(m,{key:t._id,todo:t,onDelete:function(t){return e.deleteTodo(t)},onComplete:function(t){return e.completeTask(t)}})});return t.length||(t=a.a.createElement("div",null,"List is empty")),a.a.createElement("div",{className:"container"},a.a.createElement(O.a,{exact:!0,path:"/todos",component:function(){return a.a.createElement("ul",null,t)}}),a.a.createElement(O.a,{path:"/todos/new",component:function(t){var n=t.history;return a.a.createElement(T,{history:n,createTodo:function(t){return e.createTodo(t)}})}}))}}]),t}(o.Component);var _=Object(f.b)(function(e){return Object(h.a)({},e)},{getTodos:function(){return function(e){return p("/todos").then(function(t){return e(b(t))}).catch(function(t){return e(v(t.message))})}},createTodo:function(e){return function(t){return new Promise(function(n,o){return p("/todos",{method:"post",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({text:e})}).then(function(e){t(g(e)),n()}).catch(function(e){t(v(e.message)),o(e)})})}},deleteTodo:function(e){return function(t){return new Promise(function(n,o){return p("/todos/".concat(e),{method:"delete"}).then(function(e){t(E(e._id)),n()}).catch(function(e){t(v(e.message)),o(e)})})}},updateTodo:function(e){return function(t){return new Promise(function(n,o){var a=!e.completed,r={method:"put",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify({completed:a})};return p("/todos/".concat(e._id),r).then(function(e){t(y(e)),n()}).catch(function(e){t(v(e.message)),o(e)})})}}})(k),C=n(43),S=function(){return a.a.createElement("nav",null,a.a.createElement(C.a,{exact:!0,to:"/todos",activeClassName:"nav-active"},"See todos"),a.a.createElement(C.a,{to:"/todos/new",activeClassName:"nav-active"},"Add todos"))},x=n(42),N=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"TodosApp"},a.a.createElement("h1",null,"Todos App"),a.a.createElement(S,null),a.a.createElement(O.a,{path:"/todos",component:_}),a.a.createElement(O.a,{exact:!0,path:"/",render:function(){return a.a.createElement(x.a,{to:"/todos"})}}))}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=n(41),P=n(5),X=n(19),A=Object(P.c)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case 10:return{message:t.error};case 11:return{message:null};default:return e}},todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=Object(X.a)(e);switch(t.type){case 0:n=Object(X.a)(t.todos);break;case 3:n.push(t.todo);break;case 2:n=e.map(function(e){return e._id===t.todo._id?t.todo:e});break;case 1:n=e.filter(function(e){return e._id!==t.id})}return n}}),J=n(26);var I=Object(P.e)(A,Object(P.d)(Object(P.a)(J.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));c.a.render(a.a.createElement(f.a,{store:I},a.a.createElement(D.a,null,a.a.createElement(N,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[28,1,2]]]);
//# sourceMappingURL=main.f73758e8.chunk.js.map